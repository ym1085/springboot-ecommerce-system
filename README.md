# ğŸ›’ ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ ë§Œë“œëŠ” ì‡¼í•‘ëª° í”„ë¡œì íŠ¸

## â› 01. ì‚¬ìš© ê¸°ìˆ 

> âœï¸ í”„ë¡œì íŠ¸ ì„±ê²© ìƒ í”„ë¡ íŠ¸ í˜ì´ì§€(HTML)ì˜ ê²½ìš° ë°ì´í„° ì¶œë ¥ë§Œì„ ëª©ì ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œê¸°ì—  
> Javascriptê°€ HTML ì•ˆì— ë“¤ì–´ìˆê±°ë‚˜, CSSë„ ë”°ë¡œ ë¶„ë¦¬í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

### ğŸ“Œ 01-1. Backend
| ê¸°ìˆ               | ë²„ì „    | ì ìš© ì—¬ë¶€ |
|-----------------|-------|------|
| Java            | 11    | o    |
| Spring Boot     | 2.7.1 | o    |
| Spring Security | 2.7.2 | o    |
| Spring Data JPA | 2.7.2 | x    |
| MyBatis         | 3.0.1 | o    |
| MySQL           | 8.0.28 | o    |
| Swagger         | 3.0.0 | o    |
| Docker          | 23.0.5 | o    |
| AWS EC2         |       | x    |

## âœ… 02. ERD

> âš ï¸ DB ì„¤ê³„ì˜ ê²½ìš° ì§€ì†ì ìœ¼ë¡œ ìˆ˜ì •ì„ í•˜ê³  ìˆìœ¼ë©° ì•„ë˜ ë§í¬ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”

- [dbdiagram.io](https://dbdiagram.io/d/20231015_TOY_PROJECT_DB_DIAGRAM-652b82a9ffbf5169f0b329e7)

## ğŸ¢ 03. êµ¬í˜„ ê¸°ëŠ¥

> âœï¸ [ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ](https://docs.google.com/spreadsheets/d/1Wppy4RiBwldQL77RcXoLq9OkdGnVFCzIv5TQO75fZl8/edit?usp=sharing)

- ê³µí†µ
  - íšŒì›ê°€ì…
    - íšŒì›ê°€ì…
    - ì•„ì´ë”” ì¤‘ë³µ ì²´í¬
    - ì´ë©”ì¼ ì¸ì¦
  - ë¡œê·¸ì¸
    - SNS ë¡œê·¸ì¸
    - ë¡œê·¸ì¸
  - íšŒì› ì •ë³´ ê´€ë¦¬
    - ì•„ì´ë”” ì°¾ê¸°
    - ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”
- ê´€ë¦¬ì
  - ê´€ë¦¬ì ìƒí’ˆ ê´€ë¦¬
    - ì „ì²´ ìƒí’ˆ ì¡°íšŒ
    - ìƒí’ˆ ë“±ë¡
    - ìƒí’ˆ ìˆ˜ì •
    - ìƒí’ˆ ì¬ê³  ë³€ê²½
    - ìƒí’ˆ ìƒíƒœ ë³€ê²½
    - ìƒí’ˆ í˜ì´ì§• ì²˜ë¦¬
  - ê´€ë¦¬ì ì£¼ë¬¸ ê´€ë¦¬
    - ì „ì²´ ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ
    - ë°°ì†¡ ìƒíƒœ ë³€ê²½
    - ì£¼ë¬¸ ëª©ë¡ í˜ì´ì§• ì²˜ë¦¬
- ì‚¬ìš©ì
  - ì‚¬ìš©ì ê²Œì‹œíŒ
    - ì „ì²´ ê²Œì‹œê¸€ ì¡°íšŒ
    - ìƒì„¸ ê²Œì‹œê¸€ ì¡°íšŒ
    - ê²Œì‹œê¸€ ê²€ìƒ‰
    - ê²Œì‹œê¸€ ì‘ì„±
    - ê²Œì‹œê¸€ ì‚­ì œ
    - ê²Œì‹œê¸€ ìˆ˜ì •
    - ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ
    - ë‹¤ì¤‘ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
    - ë‹¤ì¤‘ íŒŒì¼ ì••ì¶• ë‹¤ìš´ë¡œë“œ
    - ëŒ“ê¸€ ì‘ì„±
    - ëŒ“ê¸€ ìˆ˜ì •
    - ëŒ“ê¸€ ì‚­ì œ
- ë§ˆì´í˜ì´ì§€
  - í”„ë¡œí•„ ì‚¬ì§„ ë“±ë¡
  - í”„ë¡œí•„ ìˆ˜ì •
  - ìƒí’ˆ ê²Œì‹œê¸€ ì¡°íšŒ
- ìƒí’ˆ
  - ìƒí’ˆ ë©”ì¸ í™”ë©´ ì „ì²´ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
  - ìƒí’ˆ ìƒì„¸ í™”ë©´ ìƒì„¸ ìƒí’ˆ ì¡°íšŒ
- ìƒí’ˆ ì£¼ë¬¸
  - ìƒí’ˆ ì£¼ë¬¸

## ğŸ“œ 04. API Docs

> âœï¸ [swagger Document](http://localhost:8080/swagger-ui/index.html)

- API ê·œê²©ì„œì˜ ê²½ìš° swaggerë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„± í•˜ì˜€ìŠµë‹ˆë‹¤

## ğŸš€ 05. í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•

> í”„ë¡œì íŠ¸ êµ¬ë™ ì „ Docker í™˜ê²½ê³¼ ìƒê´€ì—†ì´ ë°˜ë“œì‹œ ì•„ë˜ ë‚´ìš©ì„ ì„¤ì • í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.  
> MySQL ë°ì´í„°ì˜ ê²½ìš° docker-composeë¥¼ êµ¬ë™í•˜ëŠ” ê²½ìš° docker container ë‚´ ìë™ ìƒì„±í•©ë‹ˆë‹¤.

### 05-1. classpath:/resources/application.yaml íŒŒì¼ ì¶”ê°€

> êµ¬ê¸€ ì´ë©”ì¼ ì „ì†¡ì˜ ê²½ìš° ë³¸ì¸ì˜ ì•± í‚¤ë¥¼ ë„£ì–´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤  
> [Google App ë¹„ë°€ë²ˆí˜¸ ìƒì„±](https://cloudtechflow.com/2023/10/28/%ea%b5%ac%ea%b8%80-%ec%95%b1-%eb%b9%84%eb%b0%80%eb%b2%88%ed%98%b8-%ec%83%9d%ec%84%b1%ed%95%98%ea%b8%b0/)

```yaml
# application.yaml
# ìœ„ íŒŒì¼ì´ ì—†ëŠ” ê²½ìš° ì„œë²„ êµ¬ë™ ì•ˆë  ìˆ˜ ìˆìŒ
spring:
  profiles:
    default: local
    group:
      local:
        - oauth
      dev:
        - oauth
      prod:
        - oauth

  devtools:
    livereload:
      enabled: true

  mail:
    host: smtp.gmail.com
    port: 587
    username: <êµ¬ê¸€ ê³„ì •>
    password: <ì•± ë¹„ë°€ë²ˆí˜¸>
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000
    auth-code-expiration-millis: 1800000
```

### 05-2. SNS ì†Œì…œ ë¡œê·¸ì¸ ê´€ë ¨ ì„¤ì •

> ì†Œì…œ ë¡œê·¸ì¸ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ ê° í”Œë«í¼ë³„ë¡œ ì œê³µí•´ì£¼ëŠ” í´ë¼ì´ì–¸íŠ¸ ID, Secretì„ ê¸°ì¬ í•´ì£¼ì„¸ìš”  
> [Spring Security + OAuth2.0ìœ¼ë¡œ ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„ - êµ¬ê¸€, ë„¤ì´ë²„, ì¹´ì¹´ì˜¤](https://datamoney.tistory.com/333)

```yaml
# application-oauth-sample.yaml -> application-oauth.yaml ì´ë¦„ ë³€ê²½ í•´ì£¼ì„¸ìš” 
spring:
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: í´ë¼ì´ì–¸íŠ¸ ID
            client-secret: í´ë¼ì´ì–¸íŠ¸ Secret
            scope:
              - profile
              - email
          naver:
            client-id: í´ë¼ì´ì–¸íŠ¸ ID
            client-secret: í´ë¼ì´ì–¸íŠ¸ Secret
            redirect-uri: "{baseUrl}/{action}/oauth2/code/{registrationId}"
            authorization-grant-type: authorization_code
            scope:
              - name
              - email
              - profile_image
            client-name: Naver
          kakao:
            client-id: í´ë¼ì´ì–¸íŠ¸ ID
            client-secret: í´ë¼ì´ì–¸íŠ¸ Secret
            client-name: Kakao
            scope:
              - account_email
              - profile_nickname
              - profile_image
            authorization-grant-type: authorization_code
            redirect-uri: http://localhost:8080/login/oauth2/code/kakao
            client-authentication-method: POST
        provider:
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response
          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id
```

### âš™ï¸ 05-3. íŒŒì¼ ê¶Œí•œ ë³€ê²½

> ìœ„ ì„¤ì •ì´ ëª¨ë‘ ì™„ë£Œ ë˜ë©´ ë‹¤ìŒ ë‚´ìš©ì„ ë”°ë¼ì£¼ì„¸ìš”

```shell
chmod +x run_docker.sh
chmod +x stop_docker.sh
```

- íŒŒì¼ ì‹¤í–‰ ê¶Œí•œ ë³€ê²½

### ğŸ³ 05-4. docker-compose up

```shell 
./start_docker.sh
```

- run_docker.sh ì‹¤í–‰ì‹œ ë¡œì»¬ Docker desktopì˜ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì§€ìš°ê³  ì´ë¯¸ì§€ ìƒì„±
- ìœ„ shell scriptëŠ” ìœ ì˜í•˜ì—¬ ì‚¬ìš©í•  í•„ìš”ê°€ ì¡´ì¬í•©ë‹ˆë‹¤
- gradle clean bootJar ì§„í–‰ í›„ ìƒì„±ëœ jar íŒŒì¼ì„ ê°€ì§€ê³  docker ì‹¤í–‰

### ğŸ³ 05-5. docker-compose down

```shell
./stop_docker.sh
```

- docker ì„œë²„ ì¤‘ì§€

### ğŸ“‚ 05-6. ì°¸ê³  ì‚¬í•­

```shell
ì¶”ê°€ì ìœ¼ë¡œ íŒŒì¼ ì—…ë¡œë“œì˜ ê²½ìš° ë³¸ì¸ ìš´ì˜ì²´ì œ ë§ì¶°ì„œ ì—…ë¡œë“œ í•˜ë‚˜  
ë””ë ‰í† ë¦¬ ì´ë¦„ì€ ë³¸ì¸ ì»´í“¨í„° í™˜ê²½ì— ë§ì¶°ì„œ ì‘ì„±í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤(application-dev.yaml)
```
